/* Generated by JavaFromJSON */
/*http://javafromjson.dashingrocket.com*/

package org.distantshoresmedia.model;

import android.inputmethodservice.Keyboard;

import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

import java.util.ArrayList;

public class KeyboardVariant {

    static final private String kNameKey = "name";
    static final private String kCreatedKey = "created_at";
    static final private String kUpdatedKey = "updated_at";
    static final private String kKeyboardPositionRowKey = "key_position_rows";
    static final private String kKeyboardPositionCollumnKey = "key_position_columns";

    private String name;
    public void setName(String name) {
        this.name = name;
    }
    public String getName() {
        return name;
    }

	private Integer createdAt;
 	public void setCreatedAt(Integer createdAt) {
		this.createdAt = createdAt;
	}
	public Integer getCreatedAt() {
		return createdAt;
	}

    private Integer updatedAt;
    public void setUpdatedAt(Integer updatedAt) {
        this.updatedAt = updatedAt;
    }
    public Integer getUpdatedAt() {
        return updatedAt;
    }

	private KeyPosition[] keys;
 	public void setKeys(KeyPosition[] keys) {
		this.keys = keys;
	}
	public KeyPosition[] getKeys() {
		return this.keys;
	}

    public KeyboardVariant(String name, Integer created, Integer updated, KeyPosition[] keys){
        this.name = name;
        this.createdAt = created;
        this.updatedAt = updated;
        this.keys = keys;
    }

    static public KeyboardVariant getKeyboardFromJsonObject(JSONObject jsonObj){

        try {
            // basic elements
            String name = jsonObj.getString(kNameKey);
            int created = jsonObj.getInt(kCreatedKey);
            int updated = jsonObj.getInt(kUpdatedKey);

            // Get an arraylist of keypositions based on the JSON
            JSONArray rows = jsonObj.getJSONArray(kKeyboardPositionRowKey);
            ArrayList<KeyPosition> positions = new ArrayList<KeyPosition>();

            int total = 0;

            for(int i = 0; i < rows.length(); i++){
                JSONObject rowObj = rows.getJSONObject(i);
                JSONArray columns = rowObj.getJSONArray(kKeyboardPositionCollumnKey);

                for(int j = 0; j < columns.length(); j++){
                    JSONObject colObj = columns.getJSONObject(j);
                    positions.set(total++, KeyPosition.getKeyboardFromJsonObject(colObj, i, j));
                }
            }

            // make an array of key positions
            KeyPosition[] finalPositionsArray = new KeyPosition[total];

            int index = 0;
            for(KeyPosition position : positions){
                finalPositionsArray[index++] = position;
            }

            KeyboardVariant finalVariant = new KeyboardVariant(name, created, updated, finalPositionsArray);

            return finalVariant;
        }

        catch (JSONException e) {
            System.out.println("JSONException: " + e.toString());
            return null;
        }
    }
}